{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Polars IPTools","text":"<p>Polars IPTools is a Rust-based extension to accelerate IP address manipulation and enrichment in Polars dataframes. This library includes various utility functions for working with IPv4 and IPv6 addresses and geoip and anonymization/proxy enrichment using MaxMind databases.</p>"},{"location":"#install","title":"Install","text":"<pre><code>pip install polars-iptools\n# or\nuv add polars-iptools\n</code></pre>"},{"location":"#credit","title":"Credit","text":"<p>Developing this extension was super easy by following Marco Gorelli's tutorial and cookiecutter template.</p>"},{"location":"#development","title":"Development","text":"<p>This project uses <code>just</code> for managing development tasks.</p>"},{"location":"#install-just","title":"Install Just","text":"<p>You can install <code>just</code> using Homebrew or <code>uv</code>:</p> <pre><code>brew install just\n# or\nuv tool install rust-just\n</code></pre>"},{"location":"#usage","title":"Usage","text":"<pre><code>just setup          # Set up virtual environment\njust install        # Install package in dev mode\njust test           # Run tests\njust test-matrix    # Run tests across all python versions\njust --list         # List all available commands\n</code></pre>"},{"location":"configuration/","title":"Environment Configuration","text":""},{"location":"configuration/#maxmind","title":"MaxMind","text":"<p>IPTools uses two MaxMind databases: GeoLite2-ASN.mmdb and GeoLite2-City.mmdb. You only need these files if you call the geoip functions.</p>"},{"location":"configuration/#obtaining-the-files","title":"Obtaining the files","text":"<p>The recommended way to keep these files up to date is using the <code>geoipupdate</code> tool (official docs).</p> <ol> <li>Install <code>geoipupdate</code>:<ul> <li>macOS: <code>brew install geoipupdate</code></li> <li>Linux: Use your package manager (e.g., <code>apt install geoipupdate</code>) or download from GitHub Releases.</li> </ul> </li> <li>Configure:<ul> <li>Create a <code>GeoIP.conf</code> file (usually in <code>/usr/local/etc/</code> or <code>/etc/</code>).</li> <li>Add your <code>AccountID</code>, <code>LicenseKey</code>, and <code>EditionIDs</code> (e.g., <code>GeoLite2-ASN GeoLite2-City</code>).</li> </ul> </li> <li>Run:<ul> <li>Execute <code>geoipupdate</code> to download the files.</li> </ul> </li> </ol>"},{"location":"configuration/#configuration","title":"Configuration","text":"<p>Set the <code>MAXMIND_MMDB_DIR</code> environment variable to tell the extension where these files are located.</p> <pre><code>export MAXMIND_MMDB_DIR=/path/to/your/mmdb/files\n# or Windows users\nset MAXMIND_MMDB_DIR=c:\\path\\to\\your\\mmdb\\files\n</code></pre> <p>If the environment is not set, polars_iptools will check two other common locations (on Mac/Linux):</p> <pre><code>/usr/local/share/GeoIP\n/opt/homebrew/var/GeoIP\n</code></pre>"},{"location":"configuration/#spur","title":"Spur","text":"<p>If you're a Spur customer, you can use their anonymous feed in MMDB format.</p>"},{"location":"configuration/#obtaining-the-file","title":"Obtaining the file","text":"<p>You can download the anonymous feed as an MMDB file using the Spur Exports API (official docs):</p> <pre><code>curl --get \"https://exports.spur.us/v1/feeds/anonymous\" \\\n  --data-urlencode \"output=mmdb\" \\\n  -H \"Token: $SPUR_TOKEN\" \\\n  -o spur.mmdb\n</code></pre>"},{"location":"configuration/#configuration_1","title":"Configuration","text":"<p>Export the feed as <code>spur.mmdb</code> and specify its location using <code>SPUR_MMDB_DIR</code> environment variable.</p> <pre><code>export SPUR_MMDB_DIR=/path/to/spur/mmdb\n# or Windows users\nset SPUR_MMDB_DIR=c:\\path\\to\\spur\\mmdb\n</code></pre>"},{"location":"examples/","title":"Examples","text":""},{"location":"examples/#simple-enrichments","title":"Simple enrichments","text":"<p>IPTools' Rust implementation gives you speedy answers to basic IP questions like \"is this a private IP?\"</p> <pre><code>&gt;&gt;&gt; import polars as pl\n&gt;&gt;&gt; import polars_iptools as ip\n&gt;&gt;&gt; df = pl.DataFrame({'ip': ['8.8.8.8', '2606:4700::1111', '192.168.100.100', '172.21.1.1', '172.34.5.5', 'a.b.c.d']})\n&gt;&gt;&gt; df.with_columns(ip.is_private(pl.col('ip')).alias('is_private'))\nshape: (6, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 ip              \u2506 is_private \u2502\n\u2502 ---             \u2506 ---        \u2502\n\u2502 str             \u2506 bool       \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 8.8.8.8         \u2506 false      \u2502\n\u2502 2606:4700::1111 \u2506 false      \u2502\n\u2502 192.168.100.100 \u2506 true       \u2502\n\u2502 172.21.1.1      \u2506 true       \u2502\n\u2502 172.34.5.5      \u2506 false      \u2502\n\u2502 a.b.c.d         \u2506 false      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"examples/#is_in-but-for-network-ranges","title":"<code>is_in</code> but for network ranges","text":"<p>Pandas and Polars have <code>is_in</code> functions to perform membership lookups. IPTools extends this to enable IP address membership in IP networks. This function works seamlessly with both IPv4 and IPv6 addresses and converts the specified networks into a Level-Compressed trie (LC-Trie) for fast, efficient lookups.</p> <pre><code>&gt;&gt;&gt; import polars as pl\n&gt;&gt;&gt; import polars_iptools as ip\n&gt;&gt;&gt; df = pl.DataFrame({'ip': ['8.8.8.8', '1.1.1.1', '2606:4700::1111']})\n&gt;&gt;&gt; networks = ['8.8.8.0/24', '2606:4700::/32']\n&gt;&gt;&gt; df.with_columns(ip.is_in(pl.col('ip'), networks).alias('is_in'))\nshape: (3, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 ip              \u2506 is_in \u2502\n\u2502 ---             \u2506 ---   \u2502\n\u2502 str             \u2506 bool  \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 8.8.8.8         \u2506 true  \u2502\n\u2502 1.1.1.1         \u2506 false \u2502\n\u2502 2606:4700::1111 \u2506 true  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"examples/#geoip-enrichment","title":"GeoIP enrichment","text":"<p>Using MaxMind's GeoLite2-ASN.mmdb and GeoLite2-City.mmdb databases, IPTools provides offline enrichment of network ownership and geolocation.</p> <p><code>ip.geoip.full</code> returns a Polars struct containing all available metadata parameters. If you just want the ASN and AS organization, you can use <code>ip.geoip.asn</code>.</p> <pre><code>&gt;&gt;&gt; import polars as pl\n&gt;&gt;&gt; import polars_iptools as ip\n\n&gt;&gt;&gt; df = pl.DataFrame({\"ip\":[\"8.8.8.8\", \"192.168.1.1\", \"2606:4700::1111\", \"999.abc.def.123\"]})\n&gt;&gt;&gt; df.with_columns([ip.geoip.full(pl.col(\"ip\")).alias(\"geoip\")])\n\nshape: (4, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 ip              \u2506 geoip                           \u2502\n\u2502 ---             \u2506 ---                             \u2502\n\u2502 str             \u2506 struct[11]                      \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 8.8.8.8         \u2506 {15169,\"GOOGLE\",\"\",\"NA\",\"\",\"\",\u2026 \u2502\n\u2502 192.168.1.1     \u2506 {0,\"\",\"\",\"\",\"\",\"\",\"\",\"\",0.0,0.\u2026 \u2502\n\u2502 2606:4700::1111 \u2506 {13335,\"CLOUDFLARENET\",\"\",\"\",\"\u2026 \u2502\n\u2502 999.abc.def.123 \u2506 {null,null,null,null,null,null\u2026 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n&gt;&gt;&gt; df.with_columns([ip.geoip.asn(pl.col(\"ip\")).alias(\"asn\")])\nshape: (4, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 ip              \u2506 asn                   \u2502\n\u2502 ---             \u2506 ---                   \u2502\n\u2502 str             \u2506 str                   \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 8.8.8.8         \u2506 AS15169 GOOGLE        \u2502\n\u2502 192.168.1.1     \u2506                       \u2502\n\u2502 2606:4700::1111 \u2506 AS13335 CLOUDFLARENET \u2502\n\u2502 999.abc.def.123 \u2506                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"examples/#spur-enrichment","title":"Spur enrichment","text":"<p>Spur is a commercial service that provides \"data to detect VPNs, residential proxies, and bots\". One of its offerings is a Maxmind mmdb format of at most 2,000,000 \"busiest\" Anonymous or Anonymous+Residential ips.</p> <p><code>ip.spur.full</code> returns a Polars struct containing all available metadata parameters.</p> <pre><code>&gt;&gt;&gt; import polars as pl\n&gt;&gt;&gt; import polars_iptools as ip\n\n&gt;&gt;&gt; df = pl.DataFrame({\"ip\":[\"8.8.8.8\", \"192.168.1.1\", \"999.abc.def.123\"]})\n&gt;&gt;&gt; df.with_columns([ip.spur.full(pl.col(\"ip\")).alias(\"spur\")])\n\nshape: (3, 2)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 ip              \u2506 geoip                           \u2502\n\u2502 ---             \u2506 ---                             \u2502\n\u2502 str             \u2506 struct[7]                       \u2502\n\u255e\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u256a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2561\n\u2502 8.8.8.8         \u2506 {0.0,\"\",\"\",\"\",\"\",\"\",null}       \u2502\n\u2502 192.168.1.1     \u2506 {0.0,\"\",\"\",\"\",\"\",\"\",null}       \u2502\n\u2502 999.abc.def.123 \u2506 {null,null,null,null,null,null\u2026 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"}]}